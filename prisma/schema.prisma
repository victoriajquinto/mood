// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id String @id @default(uuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  clerkId String @unique
  email String @unique
  entries JournalEntry[] //creates a one to many relationship between a user and their journal entries. 
}

model JournalEntry {
  id String @id @default(uuid()) //uuid = unique user id. random string generated by computer
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  userId String // create column called userId
  user User @relation(fields: [userId], references: [id]) //establishes relationship between JournalEntry's userId and User's id, where User's id is the foreign key for JournalEntry's userId. this needs to be done on both ends of the relationship
  @@index([userId]) //With `relationMode = "prisma"`, no foreign keys are used, so relation fields will not benefit from the index usually created by the relational database under the hood. This can lead to poor performance when querying these fields. Therefore, you add index manually. Learn more at https://pris.ly/d/relation-mode-prisma-indexes"

  content String @db.Text
}

model Analysis {
  id String @id @default(uuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  entryId String
  entry JournalEntry relation(fields: [entryId], references: [id])
}